Version 1
SubGoalCombiner SGC_AND
INITSECTION
// Food & Drinks
// DB-Structure: (_IsPoison, _FiveStarMultiplier, _Percentage, _Template )
// The _FiveStarMultiplier is 2 for food/drinks and 1 for poison potions only to prevent the effect from being doubled
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Bottle_Beer_A_db0fab18-da5b-402c-8680-13a18163e7f8"					);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Bottle_Water_A_561c4f16-5886-4226-a6c8-98eee281bf2f"					);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Bottle_Wine_A_f3fc1bf7-7c86-4cc6-a530-facaff83980d"					);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Drink_Cup_A_Apple_9309fa8b-0241-49fd-9ad6-0968bc7b08bd"					);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Drink_Cup_A_Milk_3f8be901-4b41-4a14-b9a3-0d829ffdc446"						);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Drink_Cup_A_MilkHoney_79620c9d-8c04-4952-9a1b-3aea0b92b239"				);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Drink_Cup_A_Orange_8b8e38b2-277b-4db2-8e8e-9d198fca03e8"					);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Cup_A_Tea_080d0e93-12e0-481f-9a71-f0e84ac4d5a9"						);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Cup_A_Water_66963089-31e5-4d39-ae52-decc34d75140"					);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Glass_A_Wine_252c911d-a21c-4653-a2aa-b0536a13eb4e"					);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Mug_A_Beer_2cda275d-2aea-4e57-970a-0cdb9c342b86"						);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Mug_A_Tea_70d89098-26a8-42fd-b7fb-46f705cab46b"						);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Mug_A_Water_d43fe28f-c494-4ffd-855c-34fab202ebc6"					);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Drink_Mug_A_Wine_05f52b48-d471-4366-8e64-f92c75fddfc2"						);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Apple_A_6e675b40-8e0c-4c64-ae24-20cdc1215723"							);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Bread_A_bcc18849-bb58-4679-8b5e-eeb345d38889"							);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Bread_Cheese_A_cc5838b7-93d9-4163-b977-18d385666bf3"					);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Carrot_A_f5e9b70f-692b-4ef4-b022-719433ece95e"						);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Cheese_A_dba0453f-f5bc-49ba-ab7f-7e989a745de4"						);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Cheese_Piece_A_405d1af0-5fa9-4e3e-9d7e-0a79f6b5f564"					);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Dinner_A_70e3b498-e2af-44f1-aedb-397ec186019a"						);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Fish_A_35bfe2cf-7a83-422c-b8c4-8a90b0c0e55d"							);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Fish_B_e9f60640-98dd-480d-9531-7f016bd0cced"							);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Fish_C_b7101e9c-2305-4015-8872-b46bbf13d237"							);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Fish_D_6245ee9e-69b7-426a-97ce-e7f491d42129"							);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Fish_E_93c60d6d-7db1-4e53-b5ac-f1fefbf832a9"							);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Fish_F_6e06b364-76ae-4f2b-911b-af879adeec72"							);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Food_Fries_Cold_A_6f2b9c5e-2f95-4803-90c0-817adf8cd8ae"					);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Fries_Rivellon_A_fd9ece14-1318-4c43-b2bc-7cc3dc8e1fc1"				);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Ham_A_86ad2331-1525-4aa4-98b3-f2bca6f53d23"							);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Food_Honey_Jar_A_8c156adf-ee38-4f2e-ae7e-ac7c6ae7fdd9"						);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Meat_Deer_A_a831f7b3-c6a4-4437-a623-8a3df0d6b2e7"						);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Meat_Raw_A_5263f807-9993-4c1a-873d-f7d867291dba"						);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Orange_A_18dd72d8-9ab0-4850-bb88-bd333b0f0e73"						);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Pear_A_476ff02b-ab68-45af-9a47-f5c7f029f404"							);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Pie_Apple_A_ef6891b9-ce02-4e2f-a23e-4c79fffd6ab5"						);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Pie_Cyseal_A_54773a0f-8384-44a5-9362-8daf6acda733"					);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Pizza_A_7269714a-1569-4dd8-9e88-0659665d2d92"							);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Porridge_A_f406173d-a066-4e02-8fad-2e689d547294"						);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Porridge_Potato_A_2b34fca5-bd3a-4b40-a819-8f2f310d2790"				);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Potato_A_95bacde5-ac50-45e9-b027-07f3e7b14166"						);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Potato_Boiled_A_9864d311-a761-4dce-b5aa-4e3577936256"					);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Potato_Mash_A_2fb2a948-f59f-47d6-bf0c-849f86bcdb5b"					);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Food_Potato_Mash_Cold_A_4bb3a0b6-02a5-429a-9873-978c4874a11d"				);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_RoastedPork_A_2560bcb5-16ec-47d1-9ba2-35d90d4f025f"					);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_RoastedPork_B_57b68d2b-671c-4315-ae8e-cc060fa2c6cb"					);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Soup_Pumpkin_A_a85a63ee-7fa8-4fba-813c-2e5b2fd44a75"					);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Stew_Dwarven_A_fa3d4811-f140-4a69-86f6-aec5a9d37615"					);
XCConsumbablesDB__Templates( 0, 2, 15,	"CON_Food_Stew_Elven_A_d40f5aff-e395-4be6-a8b9-ecd8afccc550"					);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Tomato_A_d75b0d34-635f-4a95-b274-ddadc6a60924"						);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Food_Tomato_Sauce_A_da113acf-08df-464c-a103-1cf05a6d366d"					);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Vegetable_Pumpkin_A_1cc8195b-26c7-47cc-aa88-c0c0ea9a7da3"				);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Vegetable_Pumpkin_B_2bf27b7d-8a23-42f3-84db-da6d2ea7197f"				);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Vegetable_Pumpkin_C_ba92efe3-ae1a-4bc5-80f5-3b8af0afcc65"				);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Food_Vegetable_Pumpkin_Farm_A_2528d9ca-ea9e-4c60-a71d-24a799db0583"		);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Herb_Mushroom_A_0106e3c1-bd81-4118-8a28-59c6dc941feb"						);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Herb_Tea_A_bc9ba999-306d-4caa-995e-5a6a7c703b86"							);
XCConsumbablesDB__Templates( 0, 2, 5,	"CON_Ingred_Dough_A_7582cac8-6dc4-4668-9da4-e7beb69a160f"						);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Ingred_Dough_Apple_A_db43ab3f-6b10-445a-bee5-9a5b6fe67cc7"					);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Ingred_Dough_CheeseBread_A_8c924f10-974a-4d45-8906-c7650894ae46"			);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Ingred_Dough_Cyseal_A_77184f81-51de-4b5c-9df5-fac255e65f9e"				);
XCConsumbablesDB__Templates( 0, 2, 10,	"CON_Ingred_Dough_Pizza_A_e79b93bc-536c-4c22-ae2c-c2e071079246"					);
// Poisoned Food & Drinks
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Bottle_Beer_A_34d1bb3b-756a-446a-8061-524de6343dde"			);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Bottle_Water_A_65cbba33-7f82-47a2-a305-6dddc28db8cf"		);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Bottle_Wine_A_e2b6dea9-42d7-44be-ba76-87740b4adf0e"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Drink_Poisoned_Cup_A_Apple_a86604a6-b73e-4a8d-bfcb-834979033cde"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Drink_Poisoned_Cup_A_Milk_811a8646-d8b1-4156-9c1b-ae9990b2a627"			);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Drink_Poisoned_Cup_A_MilkHoney_3091f5a0-a1d6-42c7-886b-5e5bf2b205c2"		);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Drink_Poisoned_Cup_A_Orange_ef61d59c-701e-43db-a861-bc3053954db1"			);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Cup_A_Tea_9a0ef7e1-2c2b-4a5d-a2d7-4d3efd013f3e"				);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Cup_A_Water_099ab385-d855-4f8a-b09d-6f3628d8c7f3"			);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Glass_A_Wine_2a3cc7a0-fdbf-496f-a693-3a377b982a77"			);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Mug_A_Beer_3210a2e5-27c7-47a9-a11a-6b93c9f71ea9"			);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Mug_A_Tea_b5aca0eb-2f36-49fd-94c3-679698760be4"				);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Mug_A_Wine_769c2f0b-d0df-4af1-8bef-989fa144bfdb"			);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Drink_Poisoned_Mug_Water_A_9f282596-1598-4daf-8f4a-1425ffa81a89"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Apple_A_5cf95d0c-8a95-4f4c-8584-a5771f53d83e"				);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Bread_A_1378d0b4-0667-4160-a61d-2218615f5651"				);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Bread_Cheese_A_fd813c37-a55b-438e-8b49-2a7dedc84221"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Carrot_A_69db6189-696e-403a-9ede-a7e2aeffebc3"				);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Cheese_A_8dab6b1b-d761-439f-8b7d-5ab400902e35"				);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Dinner_A_9a06857e-a699-495f-87f4-39f500da56a5"				);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Fish_A_8c693596-08d8-4ff4-b01d-e0e40dae5a51"					);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Fish_B_a3297c8e-1cad-463d-9b0b-ac8be948824c"					);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Fish_C_7a8e19cd-26cd-446a-b2af-94a0700fca4e"					);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Fish_D_36f59d4a-1a8a-42c3-8818-9e8ec9507fcc"					);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Fish_E_8c6f9d68-5455-41dd-88b8-9b6291f46109"					);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Fish_F_c3900e31-3a0e-4136-b4e2-a79a99e4becd"					);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Food_Poisoned_Fries_Cold_A_2b7a7ce4-4b18-400b-bce0-fcc84e78beec"			);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Fries_Rivellon_A_019763af-2c54-46d4-be37-841e6e6282d5"		);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Ham_A_32f2dab9-270d-4dc6-9a57-b21c6be899ec"					);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Food_Poisoned_Honey_Jar_A_be3cbb5c-47a5-4900-b793-7389fa75c453"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Orange_A_2727a5be-fef5-4aec-a4cb-d7626a6b2d71"				);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Pear_A_1af31b6c-ff41-41c6-b73a-1676dc0370be"					);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Pie_Apple_A_8027e5f5-4477-4609-9d88-038fa03df6da"			);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Pie_Cyseal_A_f024ba40-0373-4ae8-90bc-2071411d98ee"			);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Pizza_A_69354d9e-dd89-410e-94eb-503e0c1264f5"				);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Potato_A_abfd6f91-2c06-4bdf-bf03-1a0d4f6f60b1"				);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Potato_Boiled_A_4c448a5c-d34d-4ab4-ba21-9623cc2271ac"		);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Potato_Mash_A_9b9d8d2c-c41e-4aef-9ab2-f325b7064f2e"			);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Food_Poisoned_Potato_Mash_Cold_A_0c8f6108-93db-4698-90ce-d520cba4bd6d"		);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_RoastedPork_A_f39145d2-a2ad-428a-8bc5-84ade6873b6c"			);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Soup_Pumpkin_A_e99b5ba7-fd17-4fb9-b7a2-df8772f4e807"			);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Stew_Dwarven_A_051cf0b7-87b6-41c7-a4fb-f0832867a032"			);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Food_Poisoned_Stew_Elven_A_b111ba0d-bed4-4c22-9a74-5ba1e84193cf"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Tomato_A_4fc13ad1-a577-441e-a22a-34983f434149"				);
XCConsumbablesDB__Templates( 1, 2, 3,	"CON_Food_Poisoned_Tomato_Sauce_A_56ce770d-ddb9-4b79-bbbc-921221e34b37"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Vegetable_Pumpkin_A_07f403f6-2219-42a4-af43-c3470051903d"	);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Vegetable_Pumpkin_B_e6515693-9d9b-4d8b-b903-b90863ee033a"	);
XCConsumbablesDB__Templates( 1, 2, 7,	"CON_Food_Poisoned_Vegetable_Pumpkin_C_a35195ba-b34f-4ce7-8ec1-e8d851696e7d"	);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Porridge_A_Poisoned_8a228706-2a3c-4367-af34-91a6e75fa072"					);
XCConsumbablesDB__Templates( 1, 2, 12,	"CON_Porridge_Poisoned_Potato_A_ceed243d-9b6a-44aa-be38-c17412a45f4b"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"XC_Ingred_Dough_Apple_A_Poisoned_4a51ba0e-58c9-47c9-8798-77a1de415517"			);
XCConsumbablesDB__Templates( 1, 2, 7,	"XC_Ingred_Dough_CheeseBread_A_Poisoned_04fac72c-9ebb-492a-91ce-9a502002f8c3"	);
XCConsumbablesDB__Templates( 1, 2, 7,	"XC_Ingred_Dough_Cyseal_A_Poisoned_f2ba80f1-a6ad-41a8-a92b-941cee6428af"		);
XCConsumbablesDB__Templates( 1, 2, 7,	"XC_Ingred_Dough_Pizza_A_Poisoned_481f1969-3752-44a3-9d49-60eaa921ad0b"			);
// Poison Potions (have a multiplier of 1 --> no double effect)
XCConsumbablesDB__Templates( 1, 1, 15,	"CON_Potion_Poison_A_8122de3c-a331-44a4-b51a-6767a778776f"						);
XCConsumbablesDB__Templates( 1, 1, 25,	"CON_Potion_Poison_Medium_A_3b5c5a91-00ab-4a86-bc30-b59e14951163"				);
XCConsumbablesDB__Templates( 1, 1, 35,	"CON_Potion_Poison_Large_A_6d9420d8-cbf6-444f-ac42-c535a7df99f7"				);
KBSECTION
// Applying damage
// There is no way to really apply, it simply cannot be calculated
// Also, CharacterApplyDamage() always applies damage and bypasses a possible Zombie talent
PROC
	XCConsProc__Apply__Damage( (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
	AND
	_CurrentHP > _Percentage
	AND
	IntegerSubtract( _CurrentHP, _Percentage, _NewPercentage )
THEN
	CharacterSetHitpointsPercentage( _Char, _NewPercentage );

PROC
	XCConsProc__Apply__Damage( (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
	AND
	_CurrentHP <= _Percentage
THEN
	CharacterDie( _Char, 0 );

PROC
	XCConsProc__Apply__Heal( (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
	AND
	IntegerSum( _CurrentHP, _Percentage, _NewPercentage )
	AND
	IntegerMin( _NewPercentage, 100, _CappedPercentage )
THEN
	CharacterSetHitpointsPercentage( _Char, _CappedPercentage );


// Non Zombies
PROC
	XCConsProc__Consume__Heal( 0, (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
THEN
	XCConsProc__Apply__Heal( _Percentage, _CurrentHP, _Char );

// Zombies
PROC
	XCConsProc__Consume__Heal( 1, (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
THEN
	XCConsProc__Apply__Damage( _Percentage, _CurrentHP, _Char );

// Healing consumables have already healed once or damaged a zombie once
// So nothing must be done if the Five Star Diner talent is not present
PROC
	XCConsProc__Consume( 0, (INTEGER)_, (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
	AND
	CharacterHasTalent( _Char, "FiveStarRestaurant", 1 )
	AND
	CharacterHasTalent( _Char, "Zombie", _IsZombie )
THEN
	XCConsProc__Consume__Heal( _IsZombie, _Percentage, _CurrentHP, _Char );



PROC
	XCConsProc__Consume__Poison( 0, 0, (INTEGER)_, (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
THEN
	XCConsProc__Apply__Damage( _Percentage, _CurrentHP, _Char );

PROC
	XCConsProc__Consume__Poison( 0, 1, (INTEGER)_FiveStarMultiplier, (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
	AND
	IntegerProduct( _Percentage, _FiveStarMultiplier, _DoubledPercentage )
THEN
	XCConsProc__Apply__Damage( _DoubledPercentage, _CurrentHP, _Char );

PROC
	XCConsProc__Consume__Poison( 1, 0, (INTEGER)_, (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
THEN
	XCConsProc__Apply__Heal( _Percentage, _CurrentHP, _Char );

PROC
	XCConsProc__Consume__Poison( 1, 1, (INTEGER)_FiveStarMultiplier, (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
	AND
	IntegerProduct( _Percentage, _FiveStarMultiplier, _DoubledPercentage )
THEN
	XCConsProc__Apply__Heal( _DoubledPercentage, _CurrentHP, _Char );


PROC
	XCConsProc__Consume( 1, (INTEGER)_FiveStarMultiplier, (INTEGER)_Percentage, (INTEGER)_CurrentHP, (CHARACTER)_Char )
	AND
	CharacterHasTalent( _Char, "Zombie", _IsZombie )
	AND
	CharacterHasTalent( _Char, "FiveStarRestaurant", _HasFiveStar )
THEN
	XCConsProc__Consume__Poison( _IsZombie, _HasFiveStar, _FiveStarMultiplier, _Percentage, _CurrentHP, _Char );

IF
	CharacterUsedItemTemplate( _Char, _Template, _Handle )
	AND
	_Char.DB_IsPlayer()
	AND
	XCConsumbablesDB__Templates( _IsPoisoned, _FiveStarMultiplier, _Percentage, _Template )
	AND
	CharacterGetHitpointsPercentage( _Char, _CurrentHP )
THEN
	XCConsProc__Consume( _IsPoisoned, _FiveStarMultiplier, _Percentage, _CurrentHP, _Char );


EXITSECTION

ENDEXITSECTION
ParentTargetEdge "XCStart"
